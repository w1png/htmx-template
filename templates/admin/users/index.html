{{ define "content" }}

<div class="container mx-auto p-8 mt-16 sample-transition flex flex-col-reverse lg:flex-row gap-4"
  hx-ext="response-targets" id="swappable_content">
  <div class="grow flex flex-col gap-2" id="user_list">
    {{ range .Data }} {{ template "user" . }} {{ end }}
  </div>
  {{ block "add_user_form" . }}
  <form class="w-full lg:w-[min(300px,30%)] border-2 rounded-xl p-4 flex flex-col gap-2" id="add_edit_user_form"
    hx-indicator="#add_user_loading" hx-target="#user_list" hx-target-error="#add_user_error" hx-post="/admin/api/users"
    hx-swap="afterbegin" hx-on::after-request="ClearFormOnSubmit(event, this)">
    <p class="text-xl">Добавить администратора</p>
    <input class="admin-input h-10 w-full" type="text" autocomplete="username" name="username" id="username"
      placeholder="Имя пользователя" required />
    <input class="admin-input h-10 w-full" type="password" autocomplete="new-password" name="password" id="password"
      placeholder="Пароль" required />
    <input class="admin-input h-10 w-full" type="password" name="password_repeat" id="password_repeat"
      placeholder="Повтор пароля" required />
    <div class="flex flex-row gap-2 items-center">
      <input class="admin-checkbox" type="checkbox" name="is_admin" id="is_admin" value="true" />
      <label class="admin-input-label" for="is_admin">Администратор</label>
    </div>
    <p class="text-sm text-red-400" id="add_user_error"></p>
    <span class="htmx-indicator" id="add_user_loading">{{ template "loading" }}</span>
    <button class="admin-submit h-10 w-full" type="submit" data-loading-disable>
      Добавить
    </button>
  </form>
  {{ end }}
</div>
{{ end }}
